---
title: "Coding Challenge 4 - Solutions"
author: "Public Health 460"
output: pdf_document
---

  In this Coding Challenge, you will explore how to make map visualizations in R. This challenge will require you to "teach yourself" how to use a function, using resources provided to you. Specifically, you will be exploring the `usmap` package.


You will be using the data you cleaned in Coding Challenge 2, specifically the "Race" data. I have provided to you the `race_clean.csv` dataset on Piazza. Please submit your \textbf{.Rmd} and it's corresponding \textbf{.pdf} to your Google Drive folder by \textbf{5pm on November 9th}.

Load in the dataset, and install and load the `usmap` and `ggplot2` packages in R.

```{r, warning=FALSE, message=FALSE}
library(usmap)
library(ggplot2)
library(dplyr)
```


```{r}
race_dat = read.csv("C:/Users/bdoone/Desktop/race_clean.csv", header = T)
```

Vist the website: https://www.rdocumentation.org/packages/usmap/versions/0.4.0/topics/plot_usmap for more information on plotting maps in R.

# Question 1 (3 points)  

  (a) How many arguments can the `plot_map` function take? (1 point)  

```{r}
#answer
print(8)
```

  (b) The function mentions possibly using a FIPS code for the states. Give an example of what the FIPS alpha and numeric code is for Minnesota. (1 point)  
  
```{r}
#answer
print(list("MN",27))
```
  
  (c) Based on the `data` argument, how many columns do we need our dataset to be? (1 point)  
  
```{r}
#answer
print(2)
```

# Question 2 (10 points)

## Part A (3 points)

Find a function in the `usmap` package that will transform the `STATE` variable to FIPS codes. Then, use that function to change the `STATE` coloumn to be in terms of FIPS codes. Make sure not to overwrite your data! Then, rename the column as `fips`.

```{r}
race_datf = race_dat
race_datf$STATE = fips(race_datf$STATE)
colnames(race_datf)[1] = "fips"
```


## Part B (3 points)

Create a plot of the United States with the arrest rate for each state for those who are "White". Find a function to help you select only the observations you want.

```{r}
plot_usmap(regions = "states", data = filter(race_datf, race_datf$RACE == "White"), 
           values = "ArrestRate")
```

### Bonus (1 point)

Change the colors on this plot so that "red" means high arrest rate and "white" means low arrest rate.

```{r}
plot_usmap(regions = "states", data = filter(race_datf, race_datf$RACE == "White"), 
           values = "ArrestRate") +
  scale_fill_continuous(low = "white", high = "red")
```


## Part C (3 points)

Create a plot of New England (Maine, New Hampshire, Vermont, Massachusetts, Rhode Island, Connecticut) showing the arrest rates for Whites in each state. Make sure that the legend isn't blocking the plot. 

```{r}
plot_usmap(regions = "states", data = filter(race_datf, race_datf$RACE == "White"), 
           values = "ArrestRate", 
           include = c("09","23","25","33","44","50")) + theme(legend.position = "right")
```

## Part D (1 point)

Change the scale on the previous plot so that it ranges from $(0.01,0.06)$

```{r}
plot_usmap(regions = "states", data = filter(race_datf, race_datf$RACE == "White"), 
           values = "ArrestRate", 
           include = c("09","23","25","33","44","50")) + theme(legend.position = "right") +
  scale_fill_continuous(limits = c(0.01,0.06))
```

# Question 3 (7 points)

Try to tell a quick story about this data by modifying the plots to compare different.What do you notice about certain races? Are certain regions worse than others? What do the death rates look like? (*Be aware that scales will change from plot to plot, so make sure to account for this in your story.*)

\textbf{*Note: Points will be awarded based on effort and quality of the story. It is suggested you go above and beyond for this question.*}

